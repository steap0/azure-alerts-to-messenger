{# set variables - start #}
{# variable condition #}
{%- if data["data"]["essentials"]["monitorCondition"] == "Fired" %}
{%- set condition = "ðŸ”¥" -%}
{%- elif data["data"]["essentials"]["monitorCondition"] == "Resolved" %}
{%- set condition = "âœ…" -%}
{%- else -%}
{%- set condition = data["data"]["essentials"]["monitorCondition"] -%}
{%- endif %}
{#=============#}
{# variable severity #}
{%- set severity = {"Sev0": "ðŸ”´ Critical", "Sev1": "ðŸŸ  Error", "Sev2": "ðŸŸ¡ Warning", "Sev3": "ðŸŸ¢ Informational", "Sev4": "ðŸ”µ Verbose"} %}
{# set variables - end #}
*Rule:* {{ data["data"]["essentials"]["alertRule"] }}
{%- if data["data"]["essentials"]["description"] %}
*Description:* {{ data["data"]["essentials"]["description"] }}
{%- endif %}
*Date and time:* {{ data["data"]["essentials"]["firedDateTime"] | format_datetime }}
*Condition:* {{ condition }}
*Severity:* {{ severity[data["data"]["essentials"]["severity"]] }}
{# show metrics #}
{%- if data["data"]["alertContext"]["condition"] is defined %}
{%- for metric in data["data"]["alertContext"]["condition"]["allOf"] %}
*Metric:* {{ metric["metricName"] }}
*Threshold:* {{ metric["threshold"] }}
*Value:* {{ metric["metricValue"] }}
{% endfor %}
{%- endif -%}
{# link to search results #}
{%- if data["data"]["alertContext"]["SearchResults"] is defined -%}
*Link:* {{ data["data"]["alertContext"]["LinkToSearchResults"] }}
{%- endif %}
